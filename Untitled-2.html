<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Online oyun oyna</title>

<style>
body{
 font-family:Arial;
 background:linear-gradient(135deg,#667eea,#764ba2);
 color:white;
 text-align:center;
 margin:0;
}
.sayfa{display:none;padding:15px}
.aktif{display:block}
.kart{
 background:rgba(255,255,255,0.2);
 padding:20px;
 margin:15px auto;
 max-width:420px;
 border-radius:18px;
}
button{
 width:100%;
 max-width:260px;
 padding:15px;
 margin:8px auto;
 border-radius:30px;
 border:none;
 font-size:16px;
 background:#ffcc00;
 cursor:pointer;
}
input{
 padding:12px;
 border-radius:20px;
 border:none;
 width:80%;
 margin-bottom:10px;
}
.liste{text-align:left;max-width:420px;margin:auto}

/* ğŸ”¥ SKOR ANÄ°MASYONU */
#skor.anim {
 animation: pop 0.6s ease;
 color:#ffeb3b;
}
@keyframes pop{
 0%{transform:scale(1)}
 50%{transform:scale(1.4)}
 100%{transform:scale(1)}
}
</style>
</head>
<body>

<!-- ANA -->
<div id="ana" class="sayfa aktif">
<h1>ğŸ® Oyun Sitesi</h1>
<div class="kart">
<input id="ad" placeholder="AdÄ±nÄ± yaz">
<button onclick="oyun()">Oyunlara Gir</button>
</div>
</div>

<!-- OYUN -->
<div id="oyun" class="sayfa">
<h2>ğŸ† Skorun: <span id="skor">0</span></h2>

<div class="kart">
<button onclick="tahmin()">ğŸ¯ SayÄ± Tahmin</button>
<button onclick="yaziTura()">ğŸª™ YazÄ± Tura</button>
<button onclick="tkm()">âœŠâœ‹âœŒï¸ TaÅŸ KaÄŸÄ±t Makas</button>
</div>

<div class="kart">
<button onclick="skorKaydet()">ğŸ’¾ Skoru Kaydet</button>
<button onclick="lider()">ğŸ† Skor Tablosu</button>
<button onclick="ana()">â¬… Geri</button>
</div>
</div>

<!-- LÄ°DER -->
<div id="lider" class="sayfa">
<h2>ğŸ† CanlÄ± Skor Tablosu</h2>
<div id="liste" class="liste"></div>
<button onclick="oyun()">â¬… Oyunlara DÃ¶n</button>
</div>

<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
// ğŸ”´ BURAYI FIREBASE'DEN DOLDUR
const firebaseConfig = {
 apiKey: "AIzaSyDCR5RNvFgQtIGLG2SrULhA_CvO965YlQE",
  authDomain: "mesaj-2bc45.firebaseapp.com",
   projectId: "mesaj-2bc45"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

// SAYFA
function goster(id){
 document.querySelectorAll('.sayfa').forEach(s=>s.classList.remove('aktif'));
 document.getElementById(id).classList.add('aktif');
}
function ana(){goster("ana")}
function oyun(){
 if(ad.value.trim()==""){alert("AdÄ±nÄ± yaz");return;}
 goster("oyun"); skorYaz();
}
function lider(){
 goster("lider");
 canlÄ±Tablo();
}

// ğŸ”¢ SKOR + ANÄ°MASYON
let skor=0;
let sonKayit=0;

function skorYaz(){
 skorEl.innerText=skor;
}

const skorEl=document.getElementById("skor");

function animasyonluArtis(miktar){
 let hedef=skor+miktar;
 let gecici=skor;
 let adim=setInterval(()=>{
   gecici++;
   skorEl.innerText=gecici;
   if(gecici>=hedef){
     clearInterval(adim);
     skor=hedef;
     skorEl.classList.add("anim");
     setTimeout(()=>skorEl.classList.remove("anim"),600);
   }
 },40);
}

function kazan(){
 if(skor % 10 !== 0) return; // hile engel
 animasyonluArtis(10);
}

// ğŸ® OYUNLAR
function tahmin(){
 let s=Math.floor(Math.random()*5)+1;
 let t=prompt("1-5 arasÄ±:");
 if(t==s){alert("ğŸ‰ KazandÄ±n"); kazan();}
 else alert("âŒ YanlÄ±ÅŸ: "+s);
}

function yaziTura(){
 let r=Math.random()<0.5?"YazÄ±":"Tura";
 let t=prompt("YazÄ± mÄ± Tura mÄ±?");
 if(t && t.toLowerCase()==r.toLowerCase()){alert("ğŸ‰ KazandÄ±n"); kazan();}
 else alert("SonuÃ§: "+r);
}

function tkm(){
 let d=["TaÅŸ","KaÄŸÄ±t","Makas"];
 let pc=d[Math.floor(Math.random()*3)];
 let o=prompt("TaÅŸ / KaÄŸÄ±t / Makas");
 if(!o)return;
 o=o.charAt(0).toUpperCase()+o.slice(1).toLowerCase();
 if(o===pc) alert("ğŸ¤ Berabere");
 else if(
  (o==="TaÅŸ"&&pc==="Makas")||
  (o==="KaÄŸÄ±t"&&pc==="TaÅŸ")||
  (o==="Makas"&&pc==="KaÄŸÄ±t")
 ){alert("ğŸ‰ KazandÄ±n"); kazan();}
 else alert("ğŸ˜¢ Kaybettin: "+pc);
}

// ğŸ’¾ SKOR KAYIT (HÄ°LE ENGEL)
function skorKaydet(){
 let now=Date.now();
 if(now-sonKayit<10000){alert("Biraz bekle");return;}
 if(skor<=0 || skor>1000){alert("GeÃ§ersiz skor");return;}
 sonKayit=now;

 db.collection("skorlar").add({
  ad:ad.value.trim(),
  skor:skor,
  zaman:firebase.firestore.FieldValue.serverTimestamp()
 });
 alert("Skor kaydedildi");
}

// ğŸ† CANLI TABLO
let unsubscribe=null;
function canlÄ±Tablo(){
 if(unsubscribe) unsubscribe();
 unsubscribe=db.collection("skorlar")
 .orderBy("skor","desc")
 .limit(10)
 .onSnapshot(s=>{
  liste.innerHTML="";
  let i=1;
  s.forEach(d=>{
   let x=d.data();
   liste.innerHTML+=`<p>${i}. <b>${x.ad}</b> - ${x.skor}</p>`;
   i++;
  });
 });
}
</script>

</body>
</html>
